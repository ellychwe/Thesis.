<?php
session_start();
if (!isset($_SESSION['role']) || $_SESSION['role'] !== 'student') {
    header("Location: /scholarship/login.php");
    exit;
}

include(__DIR__ . "/../../../db_connect.php");
?>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scholarship Form</title>
    <link rel="icon" type="image/x-icon" href="logo.png">
    <link rel="stylesheet" href="form.css">
    <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>

<body>

    <!-- Sidebar -->
    <section id="menu">
        <?php include __DIR__ . "/../../../sidebar.php"; ?>
    </section>

    <section id="interface">
        <div class="navigation">
            <div class="n1">
                <div>
                    <i id="menu-btn" class="fa-solid fa-bars"></i>
                </div>
                <div class="search" id="searchInput">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="search" placeholder="Search">
                </div>
            </div>
            <div class="profile" id="profileDropdown">
                <i class="fa-solid fa-comment" id="messages"></i>
                <i class="fa-solid fa-bell" id="notifications"><span id="notifCount" class="count"></span></i>
                <img src="account.jpg" alt="Profile photo of Karylle B. Bautista" class="profile-icon"
                    id="profilePic" />
            </div>
        </div>

        <!-- Chat Container -->
        <div id="chat-container">
            <div class="chat-header">
                <span>Message</span>
                <button id="closeChat">&times;</button>
            </div>
            <div id="chat-messages"></div>
            <div class="chat-input">
                <input id="messageInput" type="text" placeholder="Type your message..." />
                <button id="sendBtn">Send</button>
            </div>
        </div>

        <!-- Notifications -->
        <div id="notifDropdown" class="notif-dropdown">
            <div class="notif-header">Notifications</div>
            <ul id="notifList"></ul>
        </div>
        <div class="container">
            <div class="breadcrumb">
                <span class="breadcrumb-item home">Home</span> /
                <span class="breadcrumb-item form">Form</span>
            </div>
            <h1>TDP-SUC Scholarship Form</h1>
        </div>

        <div class="form-container">
            <h3>Student Information</h3>
            <form id="scholarshipForm" action="submit.php" method="POST" enctype="multipart/form-data">
                <div class="name-row">
                    <div class="field">
                        <label>Last Name</label>
                        <input name="last_name" required>
                    </div>
                    <div class="field">
                        <label>First Name</label>
                        <input name="first_name" required>
                    </div>
                    <div class="field">
                        <label>Middle Name</label>
                        <input name="middle_name">
                    </div>
                    <div class="field">
                        <label>Student ID</label>
                        <input name="student_id" required>
                    </div>
                </div>
                <div class="name-row">
                    <div class="field">
                        <label for="program">Program</label>
                        <select name="program" id="program" required>
                            <option value="" disabled selected>Select your program</option>
                            <option value="bshmt">BS Hospitality Management</option>
                            <option value="bstm">BS Tourism Management</option>
                            <option value="bsed">B Secondary Education Major in Filipino</option>
                            <option value="beed">B Elementary Education</option>
                            <option value="bscs">BS Computer Science</option>
                            <option value="bses">BS Environmental Science</option>
                        </select>
                    </div>
                    <div class="field"><label>Year Level</label>
                        <select name="year_level" id="year_level" required>
                            <option value="" disabled selected>Select your year level</option>
                            <option value="I">First Year</option>
                            <option value="II">Second Year</option>
                            <option value="III">Third Year</option>
                            <option value="IV">Fourth Year</option>
                        </select>
                    </div>
                    <div class="field">
                        <label for="section">Section</label>
                        <select name="section" id="section" required>
                            <option value="" disabled selected>Select your section</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="other">Other</option>
                        </select>
                        <input type="text" id="other-section" name="other_section" placeholder="Please specify"
                            style="display: none; margin-top: 10px;" />
                    </div>
                </div>
                <div class="name-row">
                    <div class="field"><label>Email Address</label><input type="email" name="email" required></div>
                    <div class="field"><label>Phone Number</label><input name="phone" required></div>
                </div>
                <div class="name-row">
                    <div class="field"><label>Date of Birth</label><input type="date" name="dob" required></div>
                    <div class="field"><label>Sex</label>
                        <div class="gender-group">
                            <label><input type="radio" name="gender" value="Male" required> Male</label>
                            <label><input type="radio" name="gender" value="Female"> Female</label>
                            <label><input type="radio" name="gender" value="Others"> Others</label>
                        </div>
                    </div>
                </div>
                <div class="name-row">
                    <div class="field"><label>Address</label><input name="address" required></div>
                    <div class="field"><label>Zip Code</label><input name="zipcode" required></div>
                </div>
                <h3 class="section-title">Scholarship Information</h3>
                <div class="name-row">
                    <div class="field">
                        <label for="scholarship_type">Scholarship Type</label>
                        <select name="scholarship_type" id="scholarship_type" required>
                            <option value="" disabled selected>Select scholarship type</option>
                            <option value="tdp-suc">TDP-SUC</option>
                        </select>
                        <input type="text" id="other-scholarship" name="other_scholarship" placeholder="Please specify"
                            style="display:none; margin-top:10px;" />
                    </div>

                    <div class="field">
                        <label for="semester">Semester</label>
                        <select name="semester" id="semester" required>
                            <option value="" disabled selected>Select semester</option>
                            <option value="1st">1st Semester</option>
                            <option value="2nd">2nd Semester</option>
                        </select>
                    </div>

                    <div class="field">
                        <label for="academic_year">Academic Year</label>
                        <input type="text" name="academic_year" id="academic_year" placeholder="e.g. 2025-2026"
                            required>
                    </div>
                </div>

                <h3 class="section-title">Upload Requirements</h3>
                <div class="requirements-card">
                    <!-- Left Column: Download Button -->
                    <div class="download-column">
                        <button type="button" class="btn-download" onclick="download('tdp-suc')">
                            <i class="fa-solid fa-download"></i> Download TDP-SUC Form
                        </button>

                        <img src="large.png" alt="TDP-SUC Form Sample" class="download-preview">
                    </div>
                    <!-- Right Column: Upload Fields -->
                    <div class="upload-column">
                        <div class="file-group">
                            <h4><i class="fa-solid fa-upload"></i> Upload TDP-SUC Form</h4>
                            <input type="file" name="tdp_form" accept="application/pdf" required>
                        </div>
                        <div class="file-group">
                            <h4><i class="fa-solid fa-upload"></i> Upload Registration Form</h4>
                            <input type="file" name="reg_form" accept="application/pdf" required>
                        </div>
                        <div class="file-group">
                            <h4><i class="fa-solid fa-upload"></i> Upload Certificate of Grades</h4>
                            <input type="file" name="grades_form" accept="application/pdf" required>
                        </div>
                    </div>
                </div>
                <div class="field">
                    <label><input type="checkbox" id="agree" required> I certify that the above info is true and
                        complete.</label>
                </div>

                <div class="actions">
                    <button type="button" class="btn btn-cancel" onclick="window.location='form.php'">Cancel</button>
                    <button type="submit" class="btn btn-submit">Submit</button>
                </div>
            </form>
        </div>

        <div id="successModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div class="message">
                    <i class="fa-solid fa-circle-check"></i>
                    <p>Your application has been successfully submitted!</p>
                </div>
            </div>
        </div>


    </section>
    <script>
        $('#menu-btn').click(function () {
            $('#menu').toggleClass("active");
        });

        function myFunction() {
            document.getElementById("myDropdown").classList.toggle("show");
        }

        window.addEventListener("click", function (event) {
            if (!event.target.closest('.dropdown')) {
                document.querySelectorAll(".dropdown-content").forEach(function (drop) {
                    drop.classList.remove("show");
                });
            }
        });

        function download(type) {
            window.open(type + '.pdf', '_blank');
        }
        document.getElementById("scholarship_type").addEventListener("change", function () {
            if (this.value === "other") {
                document.getElementById("other-scholarship").style.display = "block";
            } else {
                document.getElementById("other-scholarship").style.display = "none";
            }
        });

    </script>
    <!--
    <script src="highlight.js"></script>
    <script src="section.js"></script>
    <script src="notif.js"></script>
    <script src="topbar.js"></script>
    <script src="chat.js"></script>
     -->
    <script src="sidebar.js" defer></script>

</body>

</html>
